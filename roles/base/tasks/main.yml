---
- name: Load distro-specific package names
  ansible.builtin.include_vars: "{{ dotfiles_distro }}.yml"

- name: Enable EPEL repository (Oracle Linux)
  ansible.builtin.dnf:
    name: oracle-epel-release-el{{ ansible_distribution_major_version }}
    state: present
  become: true
  when: dotfiles_distro == 'oracle'

- name: Enable CodeReady Builder repository (Oracle Linux)
  ansible.builtin.command:
    cmd: dnf config-manager --set-enabled ol{{ ansible_distribution_major_version }}_codeready_builder
  become: true
  changed_when: true
  when: dotfiles_distro == 'oracle'

- name: Install base packages
  ansible.builtin.package:
    name: "{{ base_packages }}"
    state: present
  become: true
